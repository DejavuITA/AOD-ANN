\tikzsetexternalprefix{tikz/}	% set subfolder
\tikzsetnextfilename{bistability_test2}
% This file was created by matplotlib2tikz v0.6.15.

\newcommand{\downfile}[1]{
    \pgfplotstableread[col sep=tab, header=true]{#1}{\table}
    \pgfplotstablegetcolsof{#1}
    \pgfmathtruncatemacro\numberofcols{\pgfplotsretval - 1}
    \pgfplotsinvokeforeach{1,...,\numberofcols}{
        \pgfplotstablegetcolumnnamebyindex{##1}\of{\table}\to{\colname}
        \addplot [name path=down##1, semithick, color##1, mark=*, mark size=1, mark options={solid}]%
        		table [x index= 0, y index=##1] {#1};
        \addlegendentryexpanded{ \colname }
    }
}

\newcommand{\upfile}[1]{
    \pgfplotstableread[col sep=tab, header=true]{#1}{\table}
    \pgfplotstablegetcolsof{#1}
    \pgfmathtruncatemacro\numberofcols{\pgfplotsretval - 1}
    \pgfplotsinvokeforeach{1,...,\numberofcols}{
        \pgfplotstablegetcolumnnamebyindex{##1}\of{\table}\to{\colname}
        \addplot [name path=up##1, semithick, color##1, mark=*, mark size=1, mark options={solid}]%
        		table [x index= 0, y index=##1] {#1};
    }
}

\begin{tikzpicture}[baseline]

	\definecolor{color1}{rgb}{0.12156862745098,0.466666666666667,0.705882352941177}
	\definecolor{color2}{rgb}{1,0.498039215686275,0.0549019607843137}
	\definecolor{color3}{rgb}{0.172549019607843,0.627450980392157,0.172549019607843}
	\definecolor{color4}{rgb}{0.83921568627451,0.152941176470588,0.156862745098039}
	\definecolor{color5}{rgb}{0.580392156862745,0.403921568627451,0.741176470588235}
	\definecolor{color6}{rgb}{0.549019607843137,0.337254901960784,0.294117647058824}
	\definecolor{color7}{rgb}{0.890196078431372,0.466666666666667,0.76078431372549}
	\definecolor{color8}{rgb}{0.45,0.45,0.45}
	\definecolor{color9}{rgb}{0.25,0.25,0.99}
	
	\begin{axis}[
			title={Transmitted Power to Drop Channel},
			xlabel={Pump Power [\si{mW}]},
			ylabel={$D(\lambda)$ [\si{\mW}]},
%			tick align=outside,
%			tick pos=left,
			width=\textwidth*0.75,%
			height=207pt,
			legend pos = outer north east,
			%cycle list name=color list,
%			forget plot style={opacity=0.4},
		]
		\addlegendentry{\hspace{-.6cm}$\Delta\lambda$ in \si{\pm}}
		\addlegendimage{empty legend};
		
		\upfile{tikz/upwards.csv}
		\downfile{tikz/downwards.csv}

    \addplot [pattern color=color1, pattern=north west lines] fill between [of=up1 and down1];
    \addplot [pattern color=color2, pattern=north west lines] fill between [of=up2 and down2];
    \addplot [pattern color=color3, pattern=north west lines] fill between [of=up3 and down3];
    \addplot [pattern color=color4, pattern=north west lines] fill between [of=up4 and down4];
    \addplot [pattern color=color5, pattern=north west lines] fill between [of=up5 and down5];
    \addplot [pattern color=color6, pattern=north west lines] fill between [of=up6 and down6];
    \addplot [pattern color=color7, pattern=north west lines] fill between [of=up7 and down7];
    \addplot [pattern color=color8, pattern=north west lines] fill between [of=up8 and down8];
    \addplot [pattern color=color9, pattern=north west lines] fill between [of=up9 and down9];
    
    \draw node at (19.80,3.4) [pin=140:{high half}] {};
    \draw node at (20.00,1.8) [pin=-90:{low half}] {};
	\end{axis}
\end{tikzpicture}